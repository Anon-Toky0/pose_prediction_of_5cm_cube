<launch>
    <!-- 启动点云处理节点 -->
    <node pkg="pose_prediction" type="HSV_solve" name="HSV_solve" output="screen">
        <param name="path_of_model" value="$(find pose_prediction)/segments.pt"/> 
    </node>
    
    <!-- 启动位姿预测节点 -->
    <node pkg="pose_prediction" type="pose_prediction" name="pose_prediction" output="screen">
        <!-- 目标点云文件路径 -->
        <param name="target_cloud_path" value="/home/smartdrone/position/saved_cloud.pcd" />
        
        <!-- 配准参数 -->
        <param name="cube_size" value="0.1" />
        <param name="voxel_size" value="0.005" />
        <param name="normal_radius" value="0.02" />
        <param name="feature_radius" value="0.05" />
        <param name="sac_ia_max_distance" value="0.01" />
        <param name="sac_ia_max_iterations" value="1000" />
        <param name="icp_max_distance" value="0.005" />
        <param name="icp_max_iterations" value="100" />
        <param name="icp_transformation_epsilon" value="1e-8" />
    </node>
    
    <!-- TF发布节点 - 用于验证配准结果 -->
    <node pkg="pose_prediction" type="tf_publisher" name="tf_publisher" output="screen">
        <!-- 坐标系配置 -->
        <param name="base_frame" value="camera_aligned_depth_to_color_frame" />
        <param name="target_frame" value="camera_result" />
        
        <!-- 发布设置 -->
        <param name="publish_tf_on_success_only" value="true" />
        <param name="publish_rate" value="10.0" />
    </node>
    
    <!-- RViz可视化 -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find pose_prediction)/rviz/pose_prediction.rviz" />
</launch> 